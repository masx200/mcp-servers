# 数学表达式计算 MCP 服务器

基于 mathjs 的数学表达式计算 MCP 服务器，支持各种数学运算。

## 功能特性

- 基本数学运算：加、减、乘、除、幂运算
- 高级函数：三角函数、对数、平方根等
- 数学常数：π (pi)、e 等
- 智能识别：支持"计算："前缀或直接输入数学表达式
- 错误处理：提供详细的错误信息和使用示例

## 安装

```bash
# 安装依赖
npm install

# 构建项目
npm run build
```

## 使用示例

### 支持的表达式格式

1. **基本运算**
   - `2 + 3 * 4` → 14
   - `(342-342*3/2)^2` → 92313

2. **三角函数**
   - `sin(pi/4)` → 0.7071067811865476
   - `cos(0)` → 1

3. **对数和幂运算**
   - `log(100)` → 2
   - `sqrt(16)` → 4
   - `2^10` → 1024

4. **复杂表达式**
   - `(sin(pi/6) + cos(pi/3)) * 2` → 2
   - `log(e^3)` → 3

## MCP 工具说明

### `calculate_math_expression`

计算数学表达式并返回结果。

**参数：**
- `expression` (string): 要计算的数学表达式

**使用方式：**
- 可以输入 `计算：(342-342*3/2)^2`
- 或直接输入 `(342-342*3/2)^2`

## 支持的数学函数

- **基本运算**: `+`, `-`, `*`, `/`, `^`
- **三角函数**: `sin`, `cos`, `tan`, `asin`, `acos`, `atan`
- **对数函数**: `log` (以10为底), `ln` (自然对数), `log10`
- **其他函数**: `sqrt`, `abs`, `ceil`, `floor`, `round`
- **常数**: `pi`, `e`

## 开发

```bash
# 开发模式运行
npm run dev

# 构建
npm run build

# 启动
npm start
```

## 配置MCP客户端

将以下配置添加到您的MCP客户端配置中：

```json
{
  "mcpServers": {
    "math-eval": {
      "command": "node",
      "args": ["path/to/mcp-math-eval/dist/index.js"]
    }
  }
}
``` 