# æ•°å­¦è¡¨è¾¾å¼è®¡ç®— MCP æœåŠ¡å™¨

åŸºäº mathjs çš„æ•°å­¦è¡¨è¾¾å¼è®¡ç®— MCP æœåŠ¡å™¨ï¼Œæ”¯æŒå„ç§æ•°å­¦è¿ç®—ã€æ•°å€¼ç§¯åˆ†å’Œç¬¦å·å¾®åˆ†ã€‚

## åŠŸèƒ½ç‰¹æ€§

- åŸºæœ¬æ•°å­¦è¿ç®—ï¼šåŠ ã€å‡ã€ä¹˜ã€é™¤ã€å¹‚è¿ç®—
- é«˜çº§å‡½æ•°ï¼šä¸‰è§’å‡½æ•°ã€å¯¹æ•°ã€å¹³æ–¹æ ¹ç­‰
- æ•°å­¦å¸¸æ•°ï¼šÏ€ (pi)ã€e ç­‰
- **æ•°å€¼ç§¯åˆ†**ï¼šä½¿ç”¨è¾›æ™®æ£®è§„åˆ™è¿›è¡Œé«˜ç²¾åº¦æ•°å€¼ç§¯åˆ†
- **ğŸ†• ç¬¦å·å¾®åˆ†**ï¼šæ”¯æŒå¤šç§å‡½æ•°çš„ç¬¦å·æ±‚å¯¼
- æ™ºèƒ½è¯†åˆ«ï¼šæ”¯æŒ"è®¡ç®—ï¼š"å‰ç¼€æˆ–ç›´æ¥è¾“å…¥æ•°å­¦è¡¨è¾¾å¼
- é”™è¯¯å¤„ç†ï¼šæä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œä½¿ç”¨ç¤ºä¾‹

## å®‰è£…

```bash
# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®
npm run build
```

## ä½¿ç”¨ç¤ºä¾‹

### æ”¯æŒçš„è¡¨è¾¾å¼æ ¼å¼

1. **åŸºæœ¬è¿ç®—**
   - `2 + 3 * 4` â†’ 14
   - `(342-342*3/2)^2` â†’ 92313

2. **ä¸‰è§’å‡½æ•°**
   - `sin(pi/4)` â†’ 0.7071067811865476
   - `cos(0)` â†’ 1

3. **å¯¹æ•°å’Œå¹‚è¿ç®—**
   - `log(100)` â†’ 2
   - `sqrt(16)` â†’ 4
   - `2^10` â†’ 1024

4. **å¤æ‚è¡¨è¾¾å¼**
   - `(sin(pi/6) + cos(pi/3)) * 2` â†’ 2
   - `log(e^3)` â†’ 3

5. **æ•°å€¼ç§¯åˆ†**
   - `integrate("2*x", "x", 0, 5)` â†’ 25
   - `integrate("sin(x)", "x", 0, pi)` â†’ 2
   - `integrate("x^2", "x", 0, 2)` â†’ 2.667
   - `integrate("1/(1+x^2)", "x", 0, 1)` â†’ 0.785 (Ï€/4)

6. **ğŸ†• ç¬¦å·å¾®åˆ†**
   - `derivative("x^3 + 2*x", "x")` â†’ 3 * x^2 + 2
   - `derivative("sin(x)", "x")` â†’ cos(x)
   - `derivative("e^x", "x")` â†’ e^x
   - `derivative("x^2 * sin(x)", "x")` â†’ 2 * x * sin(x) + x^2 * cos(x)

## MCP å·¥å…·è¯´æ˜

### `calculate_math_expression`

è®¡ç®—æ•°å­¦è¡¨è¾¾å¼å¹¶è¿”å›ç»“æœï¼ŒåŒ…æ‹¬æ•°å€¼ç§¯åˆ†å’Œç¬¦å·å¾®åˆ†ã€‚

**å‚æ•°ï¼š**

- `expression` (string): è¦è®¡ç®—çš„æ•°å­¦è¡¨è¾¾å¼

**ä½¿ç”¨æ–¹å¼ï¼š**

- æ™®é€šè®¡ç®—ï¼š`"(342-342*3/2)^2"`
- ç§¯åˆ†è®¡ç®—ï¼š`"integrate(\"2*x\", \"x\", 0, 5)"`
- å¯¼æ•°è®¡ç®—ï¼š`"derivative(\"x^3 + 2*x\", \"x\")"`
- å¸¦å‰ç¼€ï¼š`"è®¡ç®—ï¼šderivative(\"sin(x)\", \"x\")"`

## å¯¼æ•°åŠŸèƒ½è¯¦è§£

### å¯¼æ•°è¯­æ³•

```
derivative("è¢«æ±‚å¯¼å‡½æ•°", "æ±‚å¯¼å˜é‡")
```

### å¯¼æ•°ç¤ºä¾‹

- **å¤šé¡¹å¼æ±‚å¯¼**ï¼š`derivative("x^3 + 2*x", "x")`
  - è®¡ç®— d/dx(xÂ³ + 2x) = 3xÂ² + 2
- **ä¸‰è§’å‡½æ•°æ±‚å¯¼**ï¼š`derivative("sin(x)", "x")`
  - è®¡ç®— d/dx(sin(x)) = cos(x)
- **æŒ‡æ•°å‡½æ•°æ±‚å¯¼**ï¼š`derivative("e^x", "x")`
  - è®¡ç®— d/dx(eË£) = eË£
- **ä¹˜ç§¯æ³•åˆ™**ï¼š`derivative("x^2 * sin(x)", "x")`
  - è®¡ç®— d/dx(xÂ²Â·sin(x)) = 2xÂ·sin(x) + xÂ²Â·cos(x)

### æ”¯æŒçš„å¯¼æ•°å‡½æ•°

- **å¤šé¡¹å¼**: `x^n`, `ax^n + bx^m + c`
- **ä¸‰è§’å‡½æ•°**: `sin(x)`, `cos(x)`, `tan(x)`
- **æŒ‡æ•°å‡½æ•°**: `e^x`, `a^x`
- **å¯¹æ•°å‡½æ•°**: `log(x)` (è‡ªç„¶å¯¹æ•°)
- **å¤åˆå‡½æ•°**: æ”¯æŒé“¾å¼æ³•åˆ™å’Œä¹˜ç§¯æ³•åˆ™
- **å¸¸æ•°**: å¸¸æ•°çš„å¯¼æ•°ä¸º0

## ç§¯åˆ†åŠŸèƒ½è¯¦è§£

### ç§¯åˆ†è¯­æ³•

```
integrate("è¢«ç§¯å‡½æ•°", "ç§¯åˆ†å˜é‡", ä¸‹é™, ä¸Šé™)
```

### ç§¯åˆ†ç¤ºä¾‹

- **å¤šé¡¹å¼ç§¯åˆ†**ï¼š`integrate("x^2", "x", 0, 3)`
  - è®¡ç®— âˆ«â‚€Â³ xÂ² dx = 9
- **ä¸‰è§’å‡½æ•°ç§¯åˆ†**ï¼š`integrate("sin(x)", "x", 0, pi)`
  - è®¡ç®— âˆ«â‚€Ï€ sin(x) dx = 2
- **æŒ‡æ•°å‡½æ•°ç§¯åˆ†**ï¼š`integrate("e^x", "x", 0, 1)`
  - è®¡ç®— âˆ«â‚€Â¹ eË£ dx â‰ˆ 1.718
- **å¤åˆå‡½æ•°ç§¯åˆ†**ï¼š`integrate("x*sin(x)", "x", 0, pi)`
  - è®¡ç®— âˆ«â‚€Ï€ xÂ·sin(x) dx â‰ˆ 3.14

### ç§¯åˆ†ç²¾åº¦

- ä½¿ç”¨è¾›æ™®æ£®è§„åˆ™è¿›è¡Œæ•°å€¼ç§¯åˆ†
- é»˜è®¤åˆ†å‰²æ•°ï¼š1000ï¼ˆè‡ªåŠ¨è°ƒæ•´ä¸ºå¶æ•°ï¼‰
- ç²¾åº¦ï¼šçº¦10â»Â¹Â²åˆ°10â»Â¹âµ
- é€‚åˆè¿ç»­å‡½æ•°çš„ç§¯åˆ†è®¡ç®—

## æ”¯æŒçš„æ•°å­¦å‡½æ•°

- **åŸºæœ¬è¿ç®—**: `+`, `-`, `*`, `/`, `^`
- **ä¸‰è§’å‡½æ•°**: `sin`, `cos`, `tan`, `asin`, `acos`, `atan`
- **å¯¹æ•°å‡½æ•°**: `log` (è‡ªç„¶å¯¹æ•°), `log10`
- **å…¶ä»–å‡½æ•°**: `sqrt`, `abs`, `ceil`, `floor`, `round`
- **å¸¸æ•°**: `pi`, `e`
- **ç§¯åˆ†**: `integrate("å‡½æ•°", "å˜é‡", ä¸‹é™, ä¸Šé™)`
- **ğŸ†• å¯¼æ•°**: `derivative("å‡½æ•°", "å˜é‡")`

## å¼€å‘

```bash
# å¼€å‘æ¨¡å¼è¿è¡Œ
npm run dev

# æ„å»º
npm run build

# å¯åŠ¨
npm start

# æµ‹è¯•ç§¯åˆ†åŠŸèƒ½
npx tsx test-integration.js

# æµ‹è¯•å¯¼æ•°åŠŸèƒ½
npx tsx test-derivative.js
```

## é…ç½®MCPå®¢æˆ·ç«¯

å°†ä»¥ä¸‹é…ç½®æ·»åŠ åˆ°æ‚¨çš„MCPå®¢æˆ·ç«¯é…ç½®ä¸­ï¼š

```json
{
  "mcpServers": {
    "math-eval": {
      "command": "node",
      "args": ["path/to/mcp-math-eval/dist/index.js"]
    }
  }
}
```

## æ€§èƒ½æµ‹è¯•ç»“æœ

### ç§¯åˆ†æµ‹è¯•ç»“æœ

| ç§¯åˆ†è¡¨è¾¾å¼    | æ•°å€¼ç»“æœ | ç†è®ºå€¼ | è¯¯å·®   | ç²¾åº¦ç­‰çº§  |
| ------------- | -------- | ------ | ------ | --------- |
| âˆ«â‚€âµ 2x dx     | 25.000   | 25     | ~10â»Â¹âµ | âœ… é«˜ç²¾åº¦ |
| âˆ«â‚€Â² xÂ² dx     | 2.667    | 8/3    | ~10â»Â¹âµ | âœ… é«˜ç²¾åº¦ |
| âˆ«â‚€Ï€ sin(x) dx | 2.000    | 2      | ~10â»Â¹Â² | âœ… é«˜ç²¾åº¦ |
| âˆ«â‚€Â¹â° 1 dx     | 10.000   | 10     | 0      | âœ… é«˜ç²¾åº¦ |

### å¯¼æ•°æµ‹è¯•ç»“æœ

| åŸå‡½æ•°        | å¯¼æ•°ç»“æœ              | çŠ¶æ€    |
| ------------- | --------------------- | ------- |
| xÂ³ + 2x       | 3xÂ² + 2               | âœ… å®Œç¾ |
| sin(x)        | cos(x)                | âœ… å®Œç¾ |
| eË£            | eË£                    | âœ… å®Œç¾ |
| xÂ²Â·sin(x)     | 2xÂ·sin(x) + xÂ²Â·cos(x) | âœ… å®Œç¾ |
| 5xâ´ - 3xÂ² + 7 | 20xÂ³ - 6x             | âœ… å®Œç¾ |
